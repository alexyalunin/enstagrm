<!doctype html>
<html lang="en">
  <head>
    <title>Enstagram</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link rel="shortcut icon" href="bootstrap/images/favicon.png" type="image/png">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
      <!-- Bootstrap core CSS -->
    <link href="../../../../dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="bootstrap/font-awesome/css/font-awesome.min.css">
    <!-- Custom styles for this template -->
    <link href="bootstrap/css/style.css" rel="stylesheet">

  </head>
  <body>
	  
		 
	 <nav class="navbar navbar-expand-md navbar-light fixed-top bg-white">
		 <div class="container">


			 	<a class="navbar-brand" href="index.html">Enstagrm</a>
			 			 
			 	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
			 	<span class="navbar-toggler-icon"></span>
			 	</button>
      
			 	<div class="collapse navbar-collapse " style="flex-grow: 0"id="navbarCollapse">
			 		<ul class="navbar-nav">
						<li>
							<img id="loader" src="https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif" style="display: none;" height="50" width="50">
						</li>
				 		<li class="nav-item ">
			 				<a class="nav-link" href="#"><i class="fa fa-plus" aria-hidden="true" data-toggle="modal" data-target="#myModalAddPhoto"></i></a>
			 			</li>
<!--
			 			<li class="nav-item">
			 				<a class="nav-link " href="#"><i class="fa fa-search" aria-hidden="true"></i></a>
			 			</li>
			 			<li class="nav-item">
			 				<a class="nav-link" href="#"><i class="fa fa-credit-card" aria-hidden="true"></i></a>
			 			</li>
-->
			 			<li class="nav-item ">
			 				<a id="profileNavButton" class="nav-link" href=""><i class="fa fa-user-o" aria-hidden="true"></i></a>
			 				</li>
			 			<li class="nav-item ">
			 				<a class="nav-link" href="settings.html"><i class="fa fa-cog" aria-hidden="true"></i></a>
			 			</li>
			 			
        			</ul>
	    		</div>
			 
		 </div>
    </nav>

	  
     <div class="container">
	 	<div class="row justify-content-center">
	 			<div id="settings" class="col-12 col-sm-10  col-auto  ">
		 			<div class="profile_inner col-sm-8  offset-sm-2 inbl" >
				      	<div class="col-3 " style="display: inline-block; float: left; ">
					  		<img src="" id="avatar" class="photo mx-auto d-block" style="width: 50px; height: 50px; float: left">
	      				</div>
		  				<input class="col-sm-8 inbl" id="input-b5" name="input-b5[]" type="file" multiple>
				     </div>
	 				<div class="form-horizontal col-sm-8  offset-sm-2" >
					  <div class="form-group" >
					    <label class="control-label col-sm-3" for="real-name">Name</label>
					    <div class="col-sm-8 inbl">
							<input type="text" class="form-control" id="real-name" placeholder="Enter name">
					    </div>
					  </div>
					  <div class="form-group" >
					    <label class="control-label col-sm-3" for="bio">Bio</label>
					    <div class="col-sm-8 inbl">
							<input type="text" class="form-control" id="bio" placeholder="Enter some info about yourself">
					    </div>
					  </div>
					  <div class="form-group">
					    <div class="col-sm-offset-2 col-sm-10">
					      <button id="fillProfileButton" type="submit" class="btn btn-primary">Submit</button>
					    </div>
					  </div>
					</div>
	 			</div>
	      </div>

      </div>
      
     	
    </div> <!-- /container -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    
    
     <script>
	      var cw = $('.single_profile_photo').width();
		  $('.single_profile_photo').css({'height':cw+'px'});
	    $(window).resize(function(){
	      var cw = $('.single_profile_photo').width();
		  $('.single_profile_photo').css({'height':cw+'px'});
		 });
				  
		 
	  </script>
	  <script>
		  $(document).ready( function() {
    	$(document).on('change', '.btn-file :file', function() {
		var input = $(this),
			label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
		input.trigger('fileselect', [label]);
		});

		$('.btn-file :file').on('fileselect', function(event, label) {
		    
		    var input = $(this).parents('.input-group').find(':text'),
		        log = label;
		    
		    if( input.length ) {
		        input.val(log);
		    } else {
		        if( log ) alert(log);
		    }
	    
		});
		function readURL(input) {
		    if (input.files && input.files[0]) {
		        var reader = new FileReader();
		        
		        reader.onload = function (e) {
		            $('#img-upload').attr('src', e.target.result);
		        }
		        
		        reader.readAsDataURL(input.files[0]);
		    }
		}

		$("#imgInp").change(function(){
		    readURL(this);
		}); 	
	});
	</script>
		  


	 <script src="../web3.js"></script>
	 <script src="../jquery-3.2.1.min.js"></script>
	 <script src="https://wzrd.in/standalone/buffer"></script>
	 <script src="https://unpkg.com/ipfs-api@9.0.0/dist/index.js"
			 integrity="sha384-5bXRcW9kyxxnSMbOoHzraqa7Z0PQWIao+cgeg327zit1hz5LZCEbIMx/LWKPReuB"
			 crossorigin="anonymous"></script>
	 <script type="text/javascript" src="../functions.js"></script>

	<script>
        getUserNickname(web3.eth.defaultAccount, (nick) => {
            getUserProfile( nick, (profile) => {
                $("#real-name").val(profile["realName"]);
                $("#bio").val(profile["bio"]);
                profile.ipfsLink == "" ? $("#avatar").attr("src", "bootstrap/images/altphoto.png") : $("#avatar").attr("src", "http://ipfs.io/ipfs/" + profile.ipfsLink);
            });
        });
	</script>
	  
	   	      
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  </body>
</html>